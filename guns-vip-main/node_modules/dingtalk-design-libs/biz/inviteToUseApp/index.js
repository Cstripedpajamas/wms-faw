"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.inviteToUseApp = void 0;
var env_1 = require("dingtalk-jsapi/lib/env");
var openLink_1 = __importDefault(require("dingtalk-jsapi/api/biz/util/openLink"));
var openSlidePanel_1 = __importDefault(require("dingtalk-jsapi/api/biz/util/openSlidePanel"));
/**
 * @name inviteToUseApp
 * @category biz Helpers
 * @summary 邀请成员使用应用
 * @description
 * 唤起邀请成员界面，邀请用户使用应用
 * 支持小程序和H5微应用
 *
 * @param {Object} opt - 参数配置
 * @param {String} [opt.corpId] - 组织ID
 * @param {Number|String} [opt.id] - 应用ID或模板ID
 * @param {String} [opt.type] - 类型，标识应用或模板，可选参数。值为"APP"或"TEMPLATE"，默认为"APP"
 * @returns {Promise}
 * @example
 * // 唤起邀请界面
 * inviteToUseApp({ id: 1234, corpId: 'dingxxxxxxxx', })
 */
var platform = env_1.getENV().platform;
function inviteToUseApp(opt) {
    var id = opt.id, _a = opt.type, type = _a === void 0 ? 'APP' : _a, corpId = opt.corpId;
    if (!corpId || !id) {
        return Promise.reject({
            error: 'params error',
            message: "inviteToUseApp error: id or corpId is missing, inviteToUseApp({ id: 'appId', corpId: 'corpId'})",
        });
    }
    var url = "https://h5.dingtalk.com/open-purchase/personOpenInvite.html?corpId=" + corpId + "&appEntityId=" + id + "&appEntityType=" + type;
    if (platform === env_1.ENV_ENUM.pc) {
        // PC端
        return openSlidePanel_1.default({
            url: url,
        });
    }
    // 移动端
    return openLink_1.default({ url: url });
}
exports.inviteToUseApp = inviteToUseApp;
